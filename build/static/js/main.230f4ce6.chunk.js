(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),a=t(17),o=t(3),u=t(2),s=t(5),i=t.n(s),l="http://localhost:3001/api/persons",d=function(){return i.a.get(l).then((function(e){return e.data}))},j=function(e){return i.a.post(l,e).then((function(e){return e.data}))},b=function(e,n){return i.a.put("".concat(l,"/").concat(e),n).then((function(e){return console.log(e.data),e.data}))},f=function(e){return i.a.delete("".concat(l,"/").concat(e.id)).then((function(e){return e.data}))},h=(t(40),t(0)),m=function(e){var n=e.search,t=e.func;return Object(h.jsx)("input",{value:n,onChange:t})},O=function(e){var n=e.addPerson,t=e.newName,c=e.handlenewName,r=e.newNumber,a=e.handleNewNumber;return Object(h.jsxs)("form",{onSubmit:n,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:t,onChange:c})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:r,onChange:a})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.person,t=e.remove;return Object(h.jsxs)("div",{children:[n.name,": ",n.number," ",Object(h.jsx)("button",{onClick:t,children:"Delete"})]})},p=function(e){var n=e.personsView,t=e.removePerson;return Object(h.jsx)("div",{children:n.map((function(e){return Object(h.jsx)(v,{person:e,remove:function(){return t(e)}},e.id)}))})},w=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"good",children:n})},x=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"bad",children:n})},g=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(Object(a.a)(t)),s=Object(o.a)(r,2),i=s[0],l=s[1],v=Object(u.useState)(""),g=Object(o.a)(v,2),N=g[0],y=g[1],S=Object(u.useState)(""),P=Object(o.a)(S,2),k=P[0],E=P[1],T=Object(u.useState)(""),C=Object(o.a)(T,2),D=C[0],J=C[1],V=Object(u.useState)(null),B=Object(o.a)(V,2),F=B[0],I=B[1],q=Object(u.useState)(null),z=Object(o.a)(q,2),A=z[0],G=z[1];Object(u.useEffect)((function(){d().then((function(e){c(e),l(e)}))}),[]),console.log("render",t.length,"persons");return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(w,{message:F}),Object(h.jsx)(x,{message:A}),Object(h.jsx)("label",{htmlFor:"name",children:"filter shown with"}),Object(h.jsx)(m,{search:D,func:function(e){e.preventDefault();var n=t.filter((function(n){return n.name.includes(e.target.value)}));l(n),J(e.target.value)}}),Object(h.jsx)("h2",{children:"add a new"}),Object(h.jsx)(O,{addPerson:function(e){e.preventDefault();var n=!1,r={name:N,number:k},a=i.find((function(e){return e.name===N}));t.forEach((function(e){e.name===r.name&&(window.confirm("".concat(r.name," is already added to phonebook, replace the old number with a new one?"))&&(r.id=e.id,b(a.id,r).then(void d().then((function(e){c(e),l(e)})),I("'".concat(r.name,"''s nubmer was replaced succesfully")),setTimeout((function(){I(null)}),5e3)).catch((function(e){console.log("Error: ",e.response.data),G(e.response.data.error),setTimeout((function(){G(null)}),3e3),c(t),l(t)}))),n=!0)})),!0!==n&&j(r).then((function(e){c(t.concat(e)),l(t.concat(e)),y(""),E(""),I("'".concat(r.name,"' was added successfully")),setTimeout((function(){I(null)}),5e3)})).catch((function(e){console.log("Error: ",e.response.data),G(e.response.data.error),setTimeout((function(){G(null)}),5e3)}))},newName:N,handlenewName:function(e){y(e.target.value)},newNumber:k,handleNewNumber:function(e){E(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(p,{personsView:i,removePerson:function(e){window.confirm("Do you really want do delete ".concat(e.name," ?"))&&f(e).then((function(){return l(i.filter((function(n){return n.id!==e.id})))}),I("Person '".concat(e.name,"' was deleted succesfully")),setTimeout((function(){I(null)}),5e3))}})]})};r.a.render(Object(h.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.230f4ce6.chunk.js.map